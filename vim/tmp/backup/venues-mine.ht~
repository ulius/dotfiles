{% extends 'EventsBackboneBundle::base.html.twig' %}
{% block styles %}
{% stylesheets output='bundles/eventsbackbone/compressed/css/venuess.css' filter='less, ?yui_css, cssrewrite'
'bundles/eventsbackbone/css/venues/venues.less' 
'bundles/eventsbackbone/css/chat/chat.less' 
'bundles/eventschat/css/chat.less'
'bundles/eventsbackbone/css/base/button.css' 
'bundles/eventsbackbone/css/base/modal/simplemodal/simplemodal.less'
%}
<link rel="stylesheet" href="{{ asset_url }}" type="text/css" media="screen" />

{% endstylesheets %}

{% endblock %}
{% block content %}

{% include 'EventsBackboneBundle:Venues:filters.html.twig' %}
{% include 'EventsBackboneBundle:Venues:venues-nav.html.twig' %}
{% include 'EventsBackboneBundle:Chat:chat.html.twig' %}
{% include 'EventsChatBundle::chat.html.twig' %}

<div id="venues-page">
    <div id="venue-main-actions">
    </div>

    <div id="venues-stage" class="float">
      <!--Your venues list:-->
        <div id="venues-list">
        </div>
        <div id="venue-detail">
        </div>
    </div>

</div>

<!-- Underscore Templates
================================================== -->
<script type="text/template" id="venue-template">
    <div class="venue">
        <div class="rating">
            <div class="thumbsup">
                <span><%= thumbsup %></span>
                <input type="submit" class="thumbs-up" value=""/>
            </div>
            <div class="thumbsdown">
                <span>-<%= thumbsdown %></span>
                <input type="submit" class="thumbs-down" value=""/>
            </div>
        </div>
        <div class="venue-name">
            <a href="#"> 
                <h2><%= name %></h2> 
            </a> 
            <div class="venue-info">
                <% if (comments[0]) { %> 
                    <%= comments[0]['comment'] %>
                    <%= comments[0]['date'] %>
                    <i><%= comments[0]['user'] %></i>
                    <% } else { %>
                    <i>no comments</i>
                    <% }%>
                <br>
                <%= lastupdate %>
            </div>
        </div>
        <div class="venue-actions">
            <button id="remove-venue" class="button negative">delete</button>
            <button id="hide-venue" class="button">hide</button>
            <button id="recommend-venue" class="button">recommend for this event</button>
        </div>
    </script>

    <script type="text/template" id="venue-main-actions-template">
        <button id="add-venue" class="button positive">Add Venue</button>
     {# <button id="show-hidden-venues" class="button">Show Hidden</button> 
        Sort by:
        <select id="filter-venue-list">
            <option value="popularity">Popularity</option>
            <option value="last-update">Last Update</option>
            <option value="name">Name</option>
        </select>
        #}
    </script>

    <script type="text/template" id="venue-detail-template">
        <button id="return-to-venues-list" class="button huge">Back</button>
        <div id="tabs_container">
            <ul id="tabs">
                <li class="active"><a href="#tab1">Info</a></li>
                <li><a href="#tab2">Contacts</a></li>
                <li><a href="#tab3">More info</a></li>
            </ul>
        </div>
        <div id="venue">
            <div id="tabs_content_container">
                <div id="tab1" class="tab_content" style="display: block;">
                    <div class="left-content">
                        <div class="info">
                            <button value="Edit" class="button">Edit</button>
                            <span class="a">Venue Name:</span> <span class="b"><%= name  %></span>
                            <span class="a">Capacity:</span> <span class="b"></span>
                            <span class="a">Phone Number:</span> <span class="b">(312) 943-2252</span>
                            <span class="a">Address:</span> <span class="b">63 West Ontario Street  Chicago, IL 60654</span>
                            <span class="a">Available dates:</span> <span class="b">April 27 8:00-12:00PM</span> <span>April 28 6:00-8:00PM</span>
                        </div>
                    </div>
                </div>
                <div id="tab2" class="tab_content">
                    Contacts
                </div>
                <div id="tab3" class="tab_content">
                    More info
                </div>
            </div>
            <% _.each(comments, function(comment){ %> 
                <div class="comment">
                    <div class="header">
                        <%= comment.user %> commented
                        <div class="comment-timestamp">
                            <%= comment.date %>
                            <%= comment.time %>
                        </div>
                    </div>
                    <div class="comment-body">
                        <%= comment.comment %>
                    </div>
                </div>
                <% }); %>
        </div>
    </script>
    <div id="add-venue-modal" style="display: none;">
        <div id="simplemodal-form">
            <h1>Add Venue</h1>
            <p>Add a venue to the venue list.</p>

            <div class="add-venue-input">
                <label>Venue Name</label>
                <input type="text" id="name" value="" />
            </div>

            <div class="add-venue-input">
                <label>Contact name</label>
                <input type="text" id="contact" value="" />
            </div>

            <div class="add-venue-input">
                <label>Phone Number</label>
                <input type="text" id="phone" value="" size="10" maxlength="10" />
            </div>


            <div class="add-venue-input">
                <label>Address</label>
                <input type="text" id="address" value="" />
            </div>

            <div class="add-venue-input">
                <label>Capacity</label>
                <input type="text" id="capacity" value="" />
            </div>

            <div id="simplemodal-form-buttons">
                <button id="venue-cancel" class="negative simplemodal-close" alt="Cancel">Cancel</button>
                <button id="venue-add" class="positive primary" alt="Add Venue">Add Venue</button>
            </div>
            <div id="add-venue-errors">
            </div>
        </div>
    </div>


    {% endblock %}

    {% block footer %}

{% javascripts output='bundles/eventsbackbone/compressed/js/venues-compressed.js' filter='?yui_js'
'bundles/eventsbackbone/js/vendor/jquery.min.js'
'bundles/eventsbackbone/js/vendor/jquery-ui.min.js'
'bundles/eventsbackbone/js/vendor/underscore.js'
'bundles/eventsbackbone/js/vendor/backbone.js'
'bundles/eventsbackbone/js/vendor/backbone-nested.js'
'bundles/eventsbackbone/js/venues/venues.js'
'bundles/eventsbackbone/js/vendor/backbone_validation/backbone.validations.js'
'bundles/eventsbackbone/js/vendor/modals/simplemodal/jquery.simplemodal-1.4.2.js'
'bundles/eventsbackbone/js/vendor/touch/jquery.ui.touch-punch.min.js'
'bundles/eventschat/js/chat.js'
%}

<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}

<script type="text/javascript">
    {% if venues_json %}
    APP.venues.reset({{ venues_json|raw }});
    {% endif %}
</script>

{% endblock %}
